<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>j</title>
</head>
<body>
<h1>Save Web Page to ZIP</h1>
<form id="saveForm">
  <input type="url" id="urlInput" placeholder="Enter website URL" required>
  <button type="submit">Download ZIP</button>
</form>

<script>
document.getElementById("saveForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const url = document.getElementById("urlInput").value;
  try {
    const res = await fetch("/save-proxy", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ url })
    });
    if (!res.ok) throw new Error(await res.text());
    const blob = await res.blob();
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "page.zip";
    link.click();
  } catch (err) {
    alert("Error: " + err.message);
  }
});
</script>
</body>
</html>

